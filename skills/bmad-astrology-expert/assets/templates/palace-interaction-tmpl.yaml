# å®®ä½äº’å‹•åˆ†ææç¤ºè©æ¨¡æ¿
# ç”¨æ–¼çµæ§‹åˆ†æè€…æ™ºèƒ½é«”é€²è¡Œä¸‰æ–¹å››æ­£+å°å®®äº’å‹•åˆ†æ
# ç‰ˆæœ¬: 1.0.0
# å‰µå»ºæ—¥æœŸ: 2025-09-13

template_metadata:
  name: "å®®ä½äº’å‹•åˆ†ææ¨¡æ¿"
  version: "1.0.0"
  description: "åŸºæ–¼ä¸‰æ–¹å››æ­£+å°å®®äº’å‹•é€²è¡Œæ·±åº¦å®®ä½åˆ†æ"
  author: "BMAD Astrology Framework"
  created_date: "2025-09-13"
  last_updated: "2025-09-13"
  target_agent: "structure-analyst"
  template_type: "palace_interaction"
  complexity_level: "advanced"

# å®®ä½äº’å‹•åˆ†ææç¤ºè©æ¨¡æ¿
palace_interaction_prompt:
  system_prompt: |
    ä½ æ˜¯å°ˆæ¥­çš„ç´«å¾®æ–—æ•¸çµæ§‹åˆ†æè€…ï¼Œå°ˆé–€è² è²¬å®®ä½äº’å‹•åˆ†æã€‚ä½ å…·å‚™æ·±åšçš„å‘½ç†å­¸çŸ¥è­˜å’Œè±å¯Œçš„å¯¦æˆ°ç¶“é©—ï¼Œèƒ½å¤ æº–ç¢ºåˆ†æä¸‰æ–¹å››æ­£ã€å°å®®ã€å…­åˆç­‰å®®ä½é—œä¿‚ï¼Œä¸¦æä¾›æ·±åº¦çš„äº’å‹•å½±éŸ¿åˆ†æã€‚
    
    **ä½ çš„æ ¸å¿ƒèƒ½åŠ›ï¼š**
    1. ç²¾ç¢ºè¨ˆç®—ä¸‰æ–¹å››æ­£ã€å°å®®ã€å…­åˆç­‰å®®ä½é—œä¿‚
    2. åˆ†æå®®ä½é–“çš„äº’å‹•å½±éŸ¿å’Œåˆ¶ç´„é—œä¿‚
    3. è©•ä¼°å®®ä½äº’å‹•çš„å¼·åº¦å’Œå½±éŸ¿åŠ›
    4. æä¾›åŸºæ–¼å®®ä½äº’å‹•çš„é‹å‹¢é æ¸¬
    5. çµåˆæœ¬å‘½ç›¤ç‰¹é»é€²è¡Œå€‹æ€§åŒ–åˆ†æ
    
    **åˆ†æåŸå‰‡ï¼š**
    - åŸºæ–¼ç§‘å­¸çš„å‘½ç†è¨ˆç®—æ–¹æ³•
    - æä¾›æ©Ÿç‡æ€§é æ¸¬ï¼Œé¿å…çµ•å°åŒ–è¡¨è¿°
    - çµåˆå¯¦éš›ç”Ÿæ´»æƒ…æ³çµ¦å‡ºå¯¦ç”¨å»ºè­°
    - ä¿æŒå®¢è§€ä¸­ç«‹çš„åˆ†ææ…‹åº¦
    - é‡è¦–ç”¨æˆ¶çš„éš±ç§å’Œå€‹äººé¸æ“‡

  user_prompt_template: |
    è«‹ç‚ºæˆ‘åˆ†æ{{target_palace}}çš„å®®ä½äº’å‹•é—œä¿‚ã€‚
    
    **ç”¨æˆ¶åŸºæœ¬è³‡è¨Šï¼š**
    - å‡ºç”Ÿæ—¥æœŸï¼š{{birth_date}}
    - å‡ºç”Ÿæ™‚é–“ï¼š{{birth_time}}
    - å‡ºç”Ÿåœ°é»ï¼š{{birth_location}}
    - æ€§åˆ¥ï¼š{{gender}}
    
    **æœ¬å‘½ç›¤è³‡è¨Šï¼š**
    - å‘½å®®ä¸»æ˜Ÿï¼š{{life_palace_main_star}}
    - å„å®®ä½ä¸»æ˜Ÿï¼š{{all_palace_main_stars}}
    - å››åŒ–é…ç½®ï¼š{{four_transformations}}
    
    **åˆ†æè¦æ±‚ï¼š**
    1. è¨ˆç®—{{target_palace}}çš„ä¸‰æ–¹å››æ­£é—œä¿‚
    2. åˆ†æ{{target_palace}}çš„å°å®®é—œä¿‚
    3. è©•ä¼°å®®ä½äº’å‹•çš„å¼·åº¦å’Œå½±éŸ¿
    4. æä¾›åŸºæ–¼äº’å‹•çš„é‹å‹¢é æ¸¬
    5. çµ¦å‡ºå…·é«”çš„æ”¹å–„å»ºè­°
    
    è«‹æŒ‰ç…§ä»¥ä¸‹æ ¼å¼æä¾›åˆ†æçµæœï¼š

  analysis_format: |
    ## ğŸ›ï¸ {{target_palace}}å®®ä½äº’å‹•åˆ†æ
    
    ### ğŸ“Š ä¸‰æ–¹å››æ­£é…ç½®
    **ä¸»å®®ä½ï¼š** {{target_palace}}
    **ä¸‰æ–¹å®®ä½1ï¼š** {{three_harmony_palace_1}}
    **ä¸‰æ–¹å®®ä½2ï¼š** {{three_harmony_palace_2}}
    **æ•´é«”é…ç½®ï¼š** {{three_harmony_configuration}}
    
    ### ğŸ”„ å°å®®é—œä¿‚åˆ†æ
    **å°å®®ä½ï¼š** {{opposite_palace}}
    **å°ç«‹é—œä¿‚ï¼š** {{opposition_relationship}}
    **äº’è£œé—œä¿‚ï¼š** {{complementary_relationship}}
    **å¹³è¡¡ç‹€æ³ï¼š** {{balance_status}}
    
    ### ğŸ¯ å…­åˆé—œä¿‚åˆ†æ
    **å…­åˆå®®ä½ï¼š** {{six_harmony_palace}}
    **å”èª¿é—œä¿‚ï¼š** {{harmony_relationship}}
    **ä¿ƒé€²ä½œç”¨ï¼š** {{promotion_effect}}
    **å”èª¿ç¨‹åº¦ï¼š** {{harmony_level}}
    
    ### âš¡ äº’å‹•å¼·åº¦è©•ä¼°
    **æ•´é«”å¼·åº¦ï¼š** {{overall_intensity}}/10
    **æ˜Ÿæ›œé…ç½®å¼·åº¦ï¼š** {{star_configuration_intensity}}
    **å››åŒ–å½±éŸ¿å¼·åº¦ï¼š** {{four_transformations_intensity}}
    **å®®ä½å¼·å¼±å¼·åº¦ï¼š** {{palace_strength_intensity}}
    **äº’å‹•é—œä¿‚å¼·åº¦ï¼š** {{interaction_relationship_intensity}}
    
    ### ğŸ”® é‹å‹¢å½±éŸ¿åˆ†æ
    **æ•´é«”é‹å‹¢ï¼š** {{overall_fortune}}
    **å„å®®ä½å½±éŸ¿ï¼š**
    {% for palace in affected_palaces %}
    - **{{palace.name}}ï¼š** {{palace.influence}}
    {% endfor %}
    
    **å¹³è¡¡ç‹€æ³ï¼š** {{balance_analysis}}
    **ç™¼å±•è¶¨å‹¢ï¼š** {{development_trend}}
    
    ### ğŸ’¡ è¡Œå‹•å»ºè­°
    **ç©æ¥µè¡Œå‹•ï¼š**
    {% for action in positive_actions %}
    - {{action}}
    {% endfor %}
    
    **æ³¨æ„äº‹é …ï¼š**
    {% for warning in warnings %}
    - {{warning}}
    {% endfor %}
    
    **å¹³è¡¡æ–¹æ³•ï¼š**
    {% for method in balance_methods %}
    - {{method}}
    {% endfor %}
    
    **æ”¹å–„å»ºè­°ï¼š**
    {% for suggestion in improvement_suggestions %}
    - {{suggestion}}
    {% endfor %}
    
    ---
    *æœ¬åˆ†æåŸºæ–¼å‚³çµ±ç´«å¾®æ–—æ•¸ç†è«–ï¼Œåƒ…ä¾›åƒè€ƒï¼Œè«‹çµåˆå¯¦éš›æƒ…æ³ç†æ€§åˆ¤æ–·ã€‚*

# å®®ä½äº’å‹•è¨ˆç®—è¦å‰‡
interaction_calculation:
  three_harmony_calculation:
    name: "ä¸‰æ–¹å››æ­£è¨ˆç®—"
    description: "è¨ˆç®—ä¸‰æ–¹å››æ­£å®®ä½çš„æ–¹æ³•"
    formula: "ä¸‰æ–¹å®®ä½ = ä¸»å®®ä½ + 4, ä¸»å®®ä½ + 8 (æ¨¡12)"
    example: "å‘½å®®ä¸‰æ–¹ï¼šå‘½å®®(1) + è²¡å¸›å®®(5) + å®˜ç¥¿å®®(9)"
    
  opposite_palace_calculation:
    name: "å°å®®è¨ˆç®—"
    description: "è¨ˆç®—å°å®®çš„æ–¹æ³•"
    formula: "å°å®® = ä¸»å®®ä½ + 6 (æ¨¡12)"
    example: "å‘½å®®å°å®®ï¼šå‘½å®®(1) + é·ç§»å®®(7)"
    
  six_harmony_calculation:
    name: "å…­åˆè¨ˆç®—"
    description: "è¨ˆç®—å…­åˆå®®ä½çš„æ–¹æ³•"
    formula: "å…­åˆå®®ä½ = ä¸»å®®ä½ + 5 (æ¨¡12)"
    example: "å‘½å®®å…­åˆï¼šå‘½å®®(1) + å¥´åƒ•å®®(6)"

# å®®ä½äº’å‹•åˆ†ææ¨™æº–
interaction_standards:
  intensity_levels:
    - level: "æ¥µå¼·"
      range: "9-10"
      description: "äº’å‹•æ¥µå…¶å¼·çƒˆï¼Œå½±éŸ¿åŠ›å·¨å¤§"
      characteristics: ["æ˜Ÿæ›œå»Ÿæ—º", "å››åŒ–å¼·çƒˆ", "å®®ä½å¼·å‹¢", "äº’å‹•å’Œè«§"]
      
    - level: "å¾ˆå¼·"
      range: "7-8"
      description: "äº’å‹•å¾ˆå¼·ï¼Œå½±éŸ¿åŠ›æ˜é¡¯"
      characteristics: ["æ˜Ÿæ›œå¾—åœ°", "å››åŒ–æ˜é¡¯", "å®®ä½è‰¯å¥½", "äº’å‹•æ­£å¸¸"]
      
    - level: "ä¸­ç­‰"
      range: "5-6"
      description: "äº’å‹•ä¸­ç­‰ï¼Œå½±éŸ¿åŠ›ä¸€èˆ¬"
      characteristics: ["æ˜Ÿæ›œå¹³å’Œ", "å››åŒ–ä¸€èˆ¬", "å®®ä½å¹³ç©©", "äº’å‹•ä¸€èˆ¬"]
      
    - level: "è¼ƒå¼±"
      range: "3-4"
      description: "äº’å‹•è¼ƒå¼±ï¼Œå½±éŸ¿åŠ›æœ‰é™"
      characteristics: ["æ˜Ÿæ›œå¤±åœ°", "å››åŒ–è¼ƒå¼±", "å®®ä½è¼ƒå¼±", "äº’å‹•ä¸ä½³"]
      
    - level: "å¾ˆå¼±"
      range: "1-2"
      description: "äº’å‹•å¾ˆå¼±ï¼Œå½±éŸ¿åŠ›å¾®å°"
      characteristics: ["æ˜Ÿæ›œé™·åœ°", "å››åŒ–å¾ˆå¼±", "å®®ä½å¾ˆå¼±", "äº’å‹•æƒ¡åŠ£"]

  relationship_types:
    - type: "å’Œè«§"
      description: "å®®ä½é–“é—œä¿‚å’Œè«§ï¼Œç›¸äº’ä¿ƒé€²"
      characteristics: ["ç›¸äº’æ”¯æŒ", "å”èª¿ç™¼å±•", "å¹³è¡¡ç©©å®š", "ç©æ¥µå½±éŸ¿"]
      
    - type: "å°ç«‹"
      description: "å®®ä½é–“é—œä¿‚å°ç«‹ï¼Œç›¸äº’åˆ¶ç´„"
      characteristics: ["ç›¸äº’åˆ¶ç´„", "å°ç«‹è¡çª", "éœ€è¦å¹³è¡¡", "æŒ‘æˆ°æ€§å¼·"]
      
    - type: "äº’è£œ"
      description: "å®®ä½é–“é—œä¿‚äº’è£œï¼Œç›¸äº’è£œå……"
      characteristics: ["ç›¸äº’è£œå……", "å–é•·è£œçŸ­", "å”èª¿ç™¼å±•", "å¹³è¡¡ç©©å®š"]
      
    - type: "è¡çª"
      description: "å®®ä½é–“é—œä¿‚è¡çªï¼Œç›¸äº’å°æŠ—"
      characteristics: ["ç›¸äº’å°æŠ—", "è¡çªæ¿€çƒˆ", "éœ€è¦èª¿å’Œ", "æŒ‘æˆ°æ€§å¼·"]

# å®®ä½äº’å‹•é æ¸¬è¦å‰‡
interaction_prediction:
  prediction_methods:
    name: "é æ¸¬æ–¹æ³•"
    description: "åŸºæ–¼å®®ä½äº’å‹•é€²è¡Œé‹å‹¢é æ¸¬çš„æ–¹æ³•"
    methods:
      - method: "ä¸‰æ–¹å››æ­£é æ¸¬"
        description: "åŸºæ–¼ä¸‰æ–¹å››æ­£é—œä¿‚é æ¸¬é‹å‹¢ç™¼å±•"
        accuracy: "75-85%"
        
      - method: "å°å®®é æ¸¬"
        description: "åŸºæ–¼å°å®®é—œä¿‚é æ¸¬é‹å‹¢è®ŠåŒ–"
        accuracy: "70-80%"
        
      - method: "å…­åˆé æ¸¬"
        description: "åŸºæ–¼å…­åˆé—œä¿‚é æ¸¬é‹å‹¢å”èª¿"
        accuracy: "65-75%"
        
      - method: "ç¶œåˆé æ¸¬"
        description: "ç¶œåˆå¤šç¨®é—œä¿‚é æ¸¬é‹å‹¢ç™¼å±•"
        accuracy: "80-90%"

  prediction_categories:
    name: "é æ¸¬é¡åˆ¥"
    description: "åŸºæ–¼å®®ä½äº’å‹•çš„é æ¸¬é¡åˆ¥"
    categories:
      - category: "äº‹æ¥­é æ¸¬"
        description: "åŸºæ–¼å®˜ç¥¿å®®ä¸‰æ–¹å››æ­£é æ¸¬äº‹æ¥­ç™¼å±•"
        
      - category: "è²¡é‹é æ¸¬"
        description: "åŸºæ–¼è²¡å¸›å®®ä¸‰æ–¹å››æ­£é æ¸¬è²¡é‹è®ŠåŒ–"
        
      - category: "æ„Ÿæƒ…é æ¸¬"
        description: "åŸºæ–¼å¤«å¦»å®®ä¸‰æ–¹å››æ­£é æ¸¬æ„Ÿæƒ…ç™¼å±•"
        
      - category: "å¥åº·é æ¸¬"
        description: "åŸºæ–¼ç–¾å„å®®ä¸‰æ–¹å››æ­£é æ¸¬å¥åº·ç‹€æ³"

# å®®ä½äº’å‹•å»ºè­°æ¨¡æ¿
interaction_advice:
  positive_actions:
    name: "ç©æ¥µè¡Œå‹•å»ºè­°"
    templates:
      - "åŠ å¼·{{target_palace}}çš„ç™¼å±•ï¼Œæå‡æ•´é«”é‹å‹¢"
      - "åˆ©ç”¨{{three_harmony_palace_1}}å’Œ{{three_harmony_palace_2}}çš„å„ªå‹¢"
      - "å¹³è¡¡{{target_palace}}å’Œ{{opposite_palace}}çš„é—œä¿‚"
      - "ç™¼æ®{{six_harmony_palace}}çš„å”èª¿ä½œç”¨"
      
  warnings:
    name: "æ³¨æ„äº‹é …å»ºè­°"
    templates:
      - "æ³¨æ„{{target_palace}}å’Œ{{opposite_palace}}çš„å°ç«‹é—œä¿‚"
      - "é¿å…{{target_palace}}çš„éåº¦ç™¼å±•"
      - "è¬¹æ…è™•ç†{{three_harmony_palace_1}}çš„å½±éŸ¿"
      - "æ³¨æ„{{six_harmony_palace}}çš„å”èª¿å¹³è¡¡"
      
  balance_methods:
    name: "å¹³è¡¡æ–¹æ³•å»ºè­°"
    templates:
      - "é€šé{{target_palace}}å’Œ{{opposite_palace}}çš„å¹³è¡¡ç™¼å±•"
      - "åˆ©ç”¨{{three_harmony_palace_1}}å’Œ{{three_harmony_palace_2}}çš„å”èª¿"
      - "ç™¼æ®{{six_harmony_palace}}çš„ä¿ƒé€²ä½œç”¨"
      - "èª¿æ•´{{target_palace}}çš„ç™¼å±•ç­–ç•¥"
      
  improvement_suggestions:
    name: "æ”¹å–„å»ºè­°"
    templates:
      - "æå‡{{target_palace}}çš„æ˜Ÿæ›œé…ç½®"
      - "åŠ å¼·{{three_harmony_palace_1}}å’Œ{{three_harmony_palace_2}}çš„äº’å‹•"
      - "æ”¹å–„{{target_palace}}å’Œ{{opposite_palace}}çš„é—œä¿‚"
      - "å„ªåŒ–{{six_harmony_palace}}çš„å”èª¿ä½œç”¨"

# ç‰ˆæœ¬æ­·å²
version_history:
  - version: "1.0.0"
    date: "2025-09-13"
    changes: "åˆå§‹ç‰ˆæœ¬ï¼ŒåŒ…å«å®Œæ•´çš„å®®ä½äº’å‹•åˆ†ææ¨¡æ¿"
    author: "BMAD Astrology Framework"
